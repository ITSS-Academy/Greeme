<div class="container">
  <div class="title">
    <div class="fontnum">
      <div class="fontlist">Projects</div>
      <div class="numberlist">(20)</div>
    </div>
    <div
      class="typeproject"
      *ngFor="let type of typefield"
      [ngStyle]="{
        'background-color': type.background,
        color: type.color,
        'border-color': type.color,
      }"
    >
      {{ type.number }} {{ type.title }}
    </div>
  </div>
  <div class="btncontainer">
    <div class="search">
      <div id="searchBar">
        <i class="pi pi-search"></i>
        <input type="text" />
        <button class="searchBttn">Search</button>
      </div>
    </div>
    <div class="btn">
      <div class="option">
        <button class="optionbtn opt">
          <i class="pi pi-cog"></i>
          Option
        </button>
      </div>
      <div class="option">
        <button class="optionbtn filter">
          <i class="pi pi-filter"></i>
          Filter
        </button>
      </div>
      <div class="option">
        <button class="optionbtn export">
          <i class="pi pi-cloud-download"></i>
          Export
        </button>
      </div>
      <div class="add">
        <button class="addbtn" (click)="createproject()">
          <i class="pi pi-plus"></i>
          Add Project
        </button>
      </div>
    </div>
  </div>
  <div class="card">
    <p-table [value]="projects" dataKey="name">
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 0"></th>
          <th>Name</th>
          <th>Description</th>
          <th>Manager</th>
          <th>Status</th>
          <th>Date</th>
          <th style="width: 0"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-project let-expanded="expanded">
        <tr>
          <td class="btntask" *ngIf="project.enable_new_ticket_message == 1">
            <button
              type="button"
              pButton
              pRipple
              [pRowToggler]="project"
              class="p-button-text p-button-rounded p-button-plain"
              [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
            ></button>
          </td>
          <td *ngIf="project.enable_new_ticket_message == 0"></td>
          <td>{{ project.name }}</td>
          <td>{{ project.description }}</td>
          <td>HUHHU</td>
          <td>
            <p-tag
              [value]="getValue(project.status)"
              [severity]="getValueColor(project.status)"
            ></p-tag>
          </td>
          <!-- <td>{{ project.status == 1 ? "Action" : "Close" }}</td> -->
          <td>{{ project.created_on.split("T")[0] }}</td>
          <td class="iconproject">
            <i class="pi pi-pencil" [style]="{ 'margin-right': '.5em' }"></i
            ><i class="pi pi-trash"></i>
          </td>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="rowexpansion"
        let-product
        let-rowNode
        let-rowData="rowData"
        let-columns="columns"
      >
        <tr>
          <td colspan="7">
            <div class="p-3">
              <p-table [value]="product.orders" dataKey="id">
                <ng-template pTemplate="body" let-order>
                  <tr>
                    <td>{{ order.id }}</td>
                    <td>{{ order.customer }}</td>
                    <td>{{ order.id }}</td>
                    <td>{{ order.amount | currency : "USD" }}</td>
                    <td>
                      <p-button type="button" icon="pi pi-plus"></p-button>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="6">
                      There are no order for this product yet.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
